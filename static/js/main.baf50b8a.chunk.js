(this["webpackJsonpdata-request"]=this["webpackJsonpdata-request"]||[]).push([[0],[,,,,,,,,function(e,t,a){e.exports=a(22)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(6),c=a.n(l);a(13),a(14),a(15);function s(){return r.a.createElement("header",{className:"Header"},r.a.createElement("h1",null,"Data Request App"),r.a.createElement("p",null,"Simple SPA created with React"))}a(16);function o(){return r.a.createElement("footer",{className:"Footer"},"Source files are located in\xa0",r.a.createElement("a",{href:"https://github.com/andevadm/data-request"},"GitHub\xa0repository"))}var m=a(1);a(17),a(18);function i(e){var t=e.handleRequest,a=Object(n.useState)("Fetch"),l=Object(m.a)(a,2),c=l[0],s=l[1],o=Object(n.useState)("json"),i=Object(m.a)(o,2),u=i[0],d=i[1];return r.a.createElement("div",{className:"DataRequest"},r.a.createElement("h2",null,"Data Request Form"),r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},r.a.createElement("label",null,"Data source:",r.a.createElement("select",{id:"database",value:"materials",readOnly:!0,disabled:!0},r.a.createElement("option",{value:"materials"},"materials"))),r.a.createElement("label",null,"Select request method:",r.a.createElement("select",{id:"method",value:c,onChange:function(e){return s(e.target.value)}},r.a.createElement("option",{value:"Fetch"},"Fetch"),r.a.createElement("option",{value:"XMLHttpRequest"},"XMLHttpRequest"))),r.a.createElement("label",null,"Select data extension:",r.a.createElement("select",{id:"extension",value:u,onChange:function(e){return d(e.target.value)}},r.a.createElement("option",{value:"json"},"JSON"),r.a.createElement("option",{value:"xml"},"XML"))),r.a.createElement("label",null,"Press the button to obtain data",r.a.createElement("button",{id:"request",onClick:function(e){return t(e,"materials",c,u)}},"Request"))))}a(19);function u(e){var t=e.dataArray,a=e.requestParameters,n=e.handleSelect;return r.a.createElement("div",{className:"DataTable"},t&&0!==t.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Obtained Data"),r.a.createElement("table",{onClick:function(e){var t;if("TD"===e.target.tagName){var a=e.target.parentNode,r=a.parentNode.getElementsByClassName("selected")[0];r&&r.classList.remove("selected"),a!==r?(a.classList.add("selected"),t=+a.firstChild.textContent):t=-1,n(t)}}},r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement(d,{key:e.id,item:e})})))),r.a.createElement("div",{className:"request-parameters"},a&&"object"===typeof a?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"request-parameters-method"},"Get method: ",r.a.createElement("em",null,a.method||"Unknown")),r.a.createElement("p",{className:"request-parameters-extension"},"Data extension: ",r.a.createElement("em",{style:{textTransform:"uppercase"}}," ",a.extension||"Unknown")),r.a.createElement("p",{className:"request-parameters-time"},"Time of data processing: ",r.a.createElement("em",null,a.time||"0","\xa0ms"))):r.a.createElement("p",null,"Request parameters are unknown"))):r.a.createElement("h2",null,"Data is not obtained"))}function d(e){var t=e.item;return t&&t.id?r.a.createElement("tr",{className:"DataTableItem"},r.a.createElement("td",{className:"item-id"},t.id),r.a.createElement("td",{className:"item-name"},t.name||"No name")):(console.log("Item of DataTable is empty or has no id"),r.a.createElement(r.a.Fragment,null))}a(20);function p(e){var t=e.item;return r.a.createElement("div",{className:"DataItem"},t?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,t.name||"No name"),r.a.createElement("div",{className:"item-image"},t.image?r.a.createElement("img",{src:"/data-request/data/img/"+t.image,alt:t.name}):"No image"),r.a.createElement("div",{className:"item-body"},r.a.createElement("div",{className:"item-description"},t.description||"No description"),r.a.createElement("div",{className:"item-value"},"Density:",t.density?r.a.createElement("em",null," ",t.density,"\xa0g/cm",r.a.createElement("sup",null,"3")):r.a.createElement("em",null," no value")))):r.a.createElement("h2",null,"No item is selected"))}var h=a(3),E=a.n(h),f=a(7),v=a(4);function g(e){try{return JSON.parse(e)}catch(t){return console.log("processJSON: error in the obtained JSON data"),[]}}function b(e){try{var t,a=[],n=Object(v.a)(e.getElementsByTagName("item"));try{for(n.s();!(t=n.n()).done;){var r=t.value,l={};l.id=+r.getAttribute("id");var c,s=Object(v.a)(r.children);try{for(s.s();!(c=s.n()).done;){var o=c.value,m=o.tagName;"image"!==m?(l[m]=o.textContent.trim(),isNaN(l[m])||(l[m]=parseFloat(l[m]))):l[m]=o.getAttribute("src")}}catch(i){s.e(i)}finally{s.f()}a.push(l)}}catch(i){n.e(i)}finally{n.f()}return a}catch(u){return console.log("processXML: error in the obtained XML data"),[]}}function N(){return(N=Object(f.a)(E.a.mark((function e(t,a){var n,r,l,c,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},c=Date.now(),e.prev=2,e.next=5,fetch(t);case 5:if(!(s=e.sent).ok){e.next=23;break}return console.log("getFetch: fetch response is ready"),e.next=10,s.text();case 10:r=e.sent,e.t0=a,e.next="json"===e.t0?14:"xml"===e.t0?16:19;break;case 14:return n.data=g(r),e.abrupt("break",21);case 16:return l=(new DOMParser).parseFromString(r,"text/xml"),n.data=b(l),e.abrupt("break",21);case 19:n.data=[],console.log("getFetch: data extension is not supported");case 21:return n.parameters={time:Date.now()-c,method:"Fetch",extension:a},e.abrupt("return",Promise.resolve(n));case 23:e.next=29;break;case 25:return e.prev=25,e.t1=e.catch(2),console.log("getFetch: error within request"),e.abrupt("return",Promise.resolve([]));case 29:case"end":return e.stop()}}),e,null,[[2,25]])})))).apply(this,arguments)}function q(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(-1),s=Object(m.a)(c,2),o=s[0],d=s[1],h=Object(n.useState)({time:0,method:"Fetch",extension:"json"}),E=Object(m.a)(h,2),f=E[0],v=E[1],q=function(e){l(e.data),v(e.parameters)};return r.a.createElement("div",{className:"DataContainer"},r.a.createElement("div",{className:"column left"},r.a.createElement(i,{handleRequest:function(e,t,a,n){e.preventDefault();var r="/data-request/data/"+(t+"."+n);switch(a){case"XMLHttpRequest":!function(e,t,a){var n,r,l={},c=Date.now();try{var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4===this.readyState&&200===this.status){switch(console.log("getXMLHttp: XMLHttpRequest is ready"),t){case"json":n=this.responseText,l.data=g(n);break;case"xml":r=this.responseXML,l.data=b(r);break;default:l.data=[],console.log("getXMLHttp: data extension is not supported")}l.parameters={time:Date.now()-c,method:"XMLHttpRequest",extension:t},a(l)}},s.open("GET",e,!0),s.send()}catch(o){console.log("getXMLHttp: error within request")}}(r,n,q);break;case"Fetch":(function(e,t){return N.apply(this,arguments)})(r,n).then(q);break;default:console.log("handleRequest: request method is not supported")}console.log("--- "+(new Date).toLocaleTimeString()+" - New request ---"),console.log("Selected method: "+a),console.log("Selected data: "+r)}})),r.a.createElement("div",{className:"column center"},r.a.createElement(u,{dataArray:a,requestParameters:f,handleSelect:function(e){console.log("ID of selected item: "+e),d(e)}})),r.a.createElement("div",{className:"column right"},r.a.createElement(p,{item:a[o-1]})))}function y(){return r.a.createElement("div",{className:"App"},r.a.createElement(s,null),r.a.createElement(q,null),r.a.createElement(o,null))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[8,1,2]]]);
//# sourceMappingURL=main.baf50b8a.chunk.js.map